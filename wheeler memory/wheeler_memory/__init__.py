"""Wheeler Memory: cellular automata-based associative memory system."""

from .brick import MemoryBrick
from .chunking import (
    CHUNK_KEYWORDS,
    DEFAULT_CHUNK,
    find_brick_across_chunks,
    list_existing_chunks,
    select_chunk,
    select_recall_chunks,
)
from .dynamics import apply_ca_dynamics, evolve_and_interpret
from .hashing import hash_to_frame, text_to_hex
from .oscillation import detect_oscillation, get_cell_roles
from .rotation import store_with_rotation_retry
from .storage import list_memories, recall_memory, store_memory
from .temperature import (
    HALF_LIFE_DAYS,
    HIT_SATURATION,
    TIER_HOT,
    TIER_WARM,
    compute_temperature,
    temperature_tier,
)

# GPU backend (optional — available only when libwheeler_ca.so is built)
try:
    from .gpu_dynamics import gpu_available, gpu_evolve_batch, gpu_evolve_single
except ImportError:
    gpu_available = lambda: False
    gpu_evolve_single = None
    gpu_evolve_batch = None

# Embedding backend (optional — requires sentence-transformers)
try:
    from .embedding import embed_available, embed_to_frame, embed_to_frame_batch
except ImportError:
    embed_available = lambda: False
    embed_to_frame = None
    embed_to_frame_batch = None

__all__ = [
    "hash_to_frame",
    "text_to_hex",
    "apply_ca_dynamics",
    "evolve_and_interpret",
    "get_cell_roles",
    "detect_oscillation",
    "MemoryBrick",
    "store_memory",
    "recall_memory",
    "list_memories",
    "store_with_rotation_retry",
    "CHUNK_KEYWORDS",
    "DEFAULT_CHUNK",
    "select_chunk",
    "select_recall_chunks",
    "find_brick_across_chunks",
    "list_existing_chunks",
    "compute_temperature",
    "temperature_tier",
    "HALF_LIFE_DAYS",
    "HIT_SATURATION",
    "TIER_HOT",
    "TIER_WARM",
    # GPU (optional)
    "gpu_available",
    "gpu_evolve_single",
    "gpu_evolve_batch",
    # Embedding (optional)
    "embed_available",
    "embed_to_frame",
    "embed_to_frame_batch",
]

